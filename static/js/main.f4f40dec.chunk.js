(this.webpackJsonpbroco_and_co=this.webpackJsonpbroco_and_co||[]).push([[0],[,,function(e,n,a){e.exports={landingFormContainer:"landing__form_landingFormContainer__LAl4G",landingFormHeader:"landing__form_landingFormHeader__3x6pP",landingFormHeading:"landing__form_landingFormHeading__EljeE",landingFormHR:"landing__form_landingFormHR__Ar1hg",landingFormInput:"landing__form_landingFormInput__842sb",landingFormInputError:"landing__form_landingFormInputError__2qdNI",landingFormButton:"landing__form_landingFormButton__2wgz5",landingFormServerError:"landing__form_landingFormServerError__qj7MX"}},,function(e,n,a){e.exports={container:"Modal_container__Htkvf",displayBlock:"Modal_displayBlock__32Y--",displayNone:"Modal_displayNone__3ltqY",main:"Modal_main__1gpFV"}},,function(e,n,a){e.exports={allDoneContainer:"landing__allDone_allDoneContainer__3V396",allDoneBody:"landing__allDone_allDoneBody__3KwTc",allDoneParagraph:"landing__allDone_allDoneParagraph__3CZCp"}},,,,,function(e,n,a){e.exports={container:"Form_container__3mMOJ"}},function(e,n,a){e.exports={btn:"Button_btn__240y8"}},,,,,,function(e,n,a){},,,function(e,n,a){},function(e,n,a){"use strict";a.r(n);var t=a(1),r=a.n(t),i=a(9),c=a.n(i),o=(a(18),a(3)),l=a(4),s=a.n(l),d=a(0);var m=function(e){var n=e.show,a=e.children,r=n?"".concat(s.a.container," ").concat(s.a.displayBlock):"".concat(s.a.container," ").concat(s.a.displayNone);return Object(t.useEffect)((function(){n?(document.body.style.position="fixed",document.body.style.top="-".concat(window.scrollY,"px")):(document.body.style.position="",document.body.style.top="")}),[n]),n?Object(d.jsx)("div",{className:r,children:Object(d.jsx)("section",{className:s.a.main,children:a})}):null},u=a(8),j=a.n(u),f=a(10),b=a(5),h=a(11),p=a.n(h);var _=function(e){var n=e.children,a=e.name,r=e.handleSubmit,i=Object(t.useRef)({}),c=Object(t.useState)({}),l=Object(o.a)(c,2),s=l[0],m=l[1];return Object(d.jsx)("form",{className:p.a.container,onSubmit:function(e){e.preventDefault();for(var n=function(){for(var e=s,n=0,a=Object.entries(i.current);n<a.length;n++){var t=Object(o.a)(a[n],2),r=t[0],c=t[1],l=c.validationFunc,d=c.ref;if(l){var u=l(d.value).error;e[r]=u}else e[r]=null}return m(Object(b.a)({},e)),0===Object.values(e).filter((function(e){return null!==e})).length}(),a={},t=0,c=Object.entries(i.current);t<c.length;t++){var l=Object(o.a)(c[t],2),d=l[0],u=l[1];a[d]=u.ref.value}r(n,a)},noValidate:!0,name:a,children:n({inputErrors:s,register:function(e,n,a){i.current[n]={ref:e,validationFunc:a}},loading:!1})})},g=a(13),O=a(12),x=a.n(O),v=["children","className"];var F=function(e){var n=e.children,a=e.className,t=Object(g.a)(e,v);return Object(d.jsx)("button",Object(b.a)(Object(b.a)({},t),{},{className:"".concat(x.a.btn," ").concat(a),children:n}))};var N=function(e){var n={name:"",email:""};return n.name=e.name,n.email=e.email,n},y=function(e){return fetch("https://l94wc2001h.execute-api.ap-southeast-2.amazonaws.com/prod/fake-auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return e})).catch((function(e){console.error("Error:",e)}))},C=a(2),w=a.n(C);var E=function(e){var n=e.onSuccess,a=e.postLandingForm,r=Object(t.useRef)(),i=Object(t.useRef)(),c=Object(t.useState)(),l=Object(o.a)(c,2),s=l[0],m=l[1],u=Object(t.useState)(),b=Object(o.a)(u,2),h=b[0],p=b[1],g=Object(t.useState)(null),O=Object(o.a)(g,2),x=O[0],v=O[1],y=function(e){return{error:/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())?null:"email format incorrect"}},C=function(e){return{error:e.length>=3?null:"Name needs to be at least 3 characters long"}},E=function(){var e,n,a,t;return a=(null===(e=r.current)||void 0===e?void 0:e.value)||"",t=(null===(n=i.current)||void 0===n?void 0:n.value)||"",a===t},S=function(){var e=Object(f.a)(j.a.mark((function e(t,r){var i,c,o;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v(null),i=E(),m(i),t&&i){e.next=5;break}return e.abrupt("return");case 5:return c=N(r),p(!0),e.next=9,a(c);case 9:o=e.sent,p(!1),"object"===typeof o&&v(o.errorMessage),n();case 13:case"end":return e.stop()}}),e)})));return function(n,a){return e.apply(this,arguments)}}();return Object(d.jsx)(_,{name:"landingPageForm",handleSubmit:S,children:function(e){var n=e.inputErrors,a=e.register;return Object(d.jsxs)("div",{className:w.a.landingFormContainer,"data-testid":"landing-form-test-id",children:[Object(d.jsxs)("div",{className:w.a.landingFormHeader,children:[Object(d.jsx)("h1",{className:w.a.landingFormHeading,children:"Request an invite"}),Object(d.jsx)("hr",{className:w.a.landingFormHR})]}),Object(d.jsxs)("fieldset",{className:"form-fieldset",children:[Object(d.jsx)("input",{className:"".concat(w.a.landingFormInput," ").concat(n.name&&w.a.landingFormInputError),name:"name",type:"text",placeholder:"Full name","data-testid":"landing-form-input-fullname-test-id",ref:function(e){return a(e,"name",C)}}),Object(d.jsx)("div",{children:n.name&&n.name})]}),Object(d.jsxs)("fieldset",{className:"form-fieldset",children:[Object(d.jsx)("input",{className:"".concat(w.a.landingFormInput," ").concat(n.email&&w.a.landingFormInputError),name:"email",type:"email",placeholder:"Email","data-testid":"landing-form-input-email-test-id",ref:function(e){r.current=e,a(e,"email",y)}}),Object(d.jsx)("div",{children:n.email&&n.email})]}),Object(d.jsxs)("fieldset",{className:"form-fieldset",children:[Object(d.jsx)("input",{className:"".concat(w.a.landingFormInput," ").concat(n.confirmEmail&&w.a.landingFormInputError),name:"confirmEmail",type:"email",placeholder:"Confirm email","data-testid":"landing-form-input-confirmEmail-test-id",ref:function(e){i.current=e,a(e,"confirmEmail",y)}}),Object(d.jsx)("div",{children:n.confirmEmail&&n.confirmEmail}),void 0!==s&&Object(d.jsx)("div",{children:!s&&"emails do not match"})]}),Object(d.jsxs)("fieldset",{className:"form-submit-fieldset",children:[Object(d.jsx)(F,{className:w.a.landingFormButton,disabled:h,"data-testid":"landing-form-submit-button-test-id",children:Object(d.jsx)("span",{children:h?"Sending, please wait...":"Send"})}),Object(d.jsx)("div",{className:w.a.landingFormServerError,children:x})]})]})}})},S=a(6),D=a.n(S);var B=function(e){var n=e.onConfirm;return Object(d.jsxs)("div",{className:D.a.allDoneContainer,"data-testid":"landing-alldone",children:[Object(d.jsxs)("div",{className:w.a.landingFormHeader,children:[Object(d.jsx)("h1",{className:w.a.landingFormHeading,children:"All done!"}),Object(d.jsx)("hr",{className:w.a.landingFormHR})]}),Object(d.jsxs)("div",{className:D.a.allDoneBody,children:[Object(d.jsx)("p",{className:D.a.allDoneParagraph,children:"You will be one of the first to experience"}),Object(d.jsx)("p",{className:D.a.allDoneParagraph,children:"Broccoli & Co. when we launch."})]}),Object(d.jsx)(F,{className:w.a.landingFormButton,onClick:n,children:Object(d.jsx)("span",{children:"OK"})})]})};var I=function(e){var n=e.postLandingForm,a=Object(t.useState)(!1),r=Object(o.a)(a,2),i=r[0],c=r[1],l=Object(t.useState)(!1),s=Object(o.a)(l,2),u=s[0],j=s[1],f=function(e){e.preventDefault(),j(!1)};return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{className:"landing__heading",children:"A better way"}),Object(d.jsx)("h1",{className:"landing__heading",children:"to enjoy every day."}),Object(d.jsx)("p",{className:"landing__subheading",children:"Be the first to know when we launch."}),Object(d.jsx)(F,{onClick:function(e){e.preventDefault(),c(!0)},"data-testid":"invite-button-test-id",children:Object(d.jsx)("span",{children:"Request an invite"})})]}),Object(d.jsx)(m,{show:i,onClose:function(e){e.preventDefault(),c(!1)},children:Object(d.jsx)(E,{onSuccess:function(){c(!1),j(!0)},postLandingForm:n})}),Object(d.jsx)(m,{show:u,onClose:f,children:Object(d.jsx)(B,{onConfirm:f})})]})};a(21);var H=function(){return Object(d.jsxs)("div",{className:"app",children:[Object(d.jsx)("header",{className:"app__header",children:"BROCCOLI & CO."}),Object(d.jsx)("main",{className:"app__body",children:Object(d.jsx)(I,{postLandingForm:y})}),Object(d.jsxs)("footer",{className:"app__footer",children:[Object(d.jsx)("p",{className:"app__footer__p",children:"Made with \u2665 in Melbourne."}),Object(d.jsxs)("p",{className:"app__footer__p",children:["\xa9 ",(new Date).getFullYear()," Broccoli & Co. All rights reserved."]})]})]})},k=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,23)).then((function(n){var a=n.getCLS,t=n.getFID,r=n.getFCP,i=n.getLCP,c=n.getTTFB;a(e),t(e),r(e),i(e),c(e)}))};c.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(H,{})}),document.getElementById("root")),k()}],[[22,1,2]]]);
//# sourceMappingURL=main.f4f40dec.chunk.js.map